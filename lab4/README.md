## –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4
**–ü—Ä–µ–¥–º–µ—Ç: –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è** <br>
**–í—ã–ø–æ–ª–Ω–∏–ª: –ö–æ—Ä–æ–ª–µ–≤ –ò–≤–∞–Ω, –ú80-114–°–í**

1. –î–ª—è –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ (—Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö
–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö) —Å–æ–∑–¥–∞–π—Ç–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –≤ noSQL
–±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MongoDB (4.0 –∏–ª–∏ 5.0);
2. –í—ã–±–µ—Ä–µ—Ç–µ –ª—é–±–æ–π —Å–µ—Ä–≤–∏—Å, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π
—Å–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ PostgreSQL). –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–µ–∑–¥–∫–∞—Ö, –¥–∞–Ω–Ω—ã–µ –æ –ø–ª–∞–Ω–∞—Ö,
–¥–∞–Ω–Ω—ã–µ –æ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö ‚Ä¶.
3. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—é –°–£–ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –û–Ω
–¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞;
4. –î–ª—è —Å—É—â–Ω–æ—Å—Ç–∏, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (CRUD) —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–∞–Ω–µ–µ
—Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
5. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã, —É—Å–∫–æ—Ä—è—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã
6. –î–æ–ª–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –ø–æ–ª—è–º, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –ø–æ–∏—Å–∫
7. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤ Structurizr DSL
8. –í–∞—à–∏ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ docker-compose –∫–æ–º–∞–Ω–¥–æ–π dockercompose up (—Å–æ–∑–¥–∞–π—Ç–µ Docker —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞)

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ C++
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ Poco https://docs.pocoproject.org/current/
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mongo 4.0 (–ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞ –ø–æ–¥ –±–æ–ª–µ–µ –Ω–æ–≤—ã–µ
–≤–µ—Ä—Å–∏–∏)
- –ü—Ä–∏–º–µ—Ä –ø–æ —Ä–∞–±–æ—Ç–µ —Å Poco Web Servers –∏ Mongo
https://github.com/DVDemon/arch_lecture_examples/tree/main/hl_mai_lab_02

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ Python:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FastAPI –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pedantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pymongo –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –°–£–ë–î MongoDB
- –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è pymongo
https://github.com/DVDemon/architecture_python/tree/main/05_mongo

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä
2. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```
docker-compose up --build
```

##  –û–±–∑–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
#### üü¢ http://localhost:8001/docs - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ user_api_service –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
#### üü¢ http://localhost:8002/docs - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ marketplace_api_service —Å MongoDB

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
1. –î–ª—è –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ (—Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö
–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö) —Å–æ–∑–¥–∞–π—Ç–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –≤ noSQL
–±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MongoDB (4.0 –∏–ª–∏ 5.0);
<br>
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ <br>

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å MongoDB docker-compose.yaml

```
...

  mongo_db:
    image: mongo:4.0
    restart: always
    ports: ["27017:27017"]
    volumes:
      - mongo_data:/data/db
    healthcheck:
      test: ["CMD-SHELL", "echo 'db.adminCommand({ping:1})' | mongo --quiet"]
      interval: 5s
      timeout: 5s
      retries: 5
    depends_on:
      db:
        condition: service_healthy        
```

2. –í—ã–±–µ—Ä–µ—Ç–µ –ª—é–±–æ–π —Å–µ—Ä–≤–∏—Å, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π
—Å–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ PostgreSQL). 
–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–µ–∑–¥–∫–∞—Ö, –¥–∞–Ω–Ω—ã–µ –æ –ø–ª–∞–Ω–∞—Ö,
–¥–∞–Ω–Ω—ã–µ –æ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö ‚Ä¶.
<br>
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ <br>
–°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ

3. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—é –°–£–ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –û–Ω
–¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞;
<br>
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ <br>
—Å–∫—Ä–∏–ø—Ç - lab4/marketplace_api_service/seed.py

4. –î–ª—è —Å—É—â–Ω–æ—Å—Ç–∏, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (CRUD) —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–∞–Ω–µ–µ
—Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
<br>
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ <br>
http://localhost:8002/docs/api_marketplace/v1/admin/product -> GET, POST - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ <br>
http://localhost:8002/docs/api_marketplace/v1/admin/product/{product_id} -> PUT, DELETE - –∏–∑–º–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

5. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã, —É—Å–∫–æ—Ä—è—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã
<br>
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ <br>

6. –î–æ–ª–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –ø–æ–ª—è–º, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –ø–æ–∏—Å–∫
<br>
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ <br>
–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è database.py
```
...
# –∏–Ω–¥–µ–∫—Å—ã
products.create_index([("id", ASCENDING)],    unique=True, name="id_uq")
products.create_index(
    [("name", ASCENDING), ("price", ASCENDING)],
    unique=True,
    name="name_price_uq",
)

```

7. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤ Structurizr DSL
<br>
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ <br>

8. –í–∞—à–∏ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ docker-compose –∫–æ–º–∞–Ω–¥–æ–π dockercompose up (—Å–æ–∑–¥–∞–π—Ç–µ Docker —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞)
<br>
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ <br>


